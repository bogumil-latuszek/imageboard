@page
@using Microsoft.AspNetCore.StaticFiles
@model imageboard.Pages.ItemDetails

<!DOCTYPE html>

<html>
<head>
    <title></title>
</head>
<body>
    <div class="container">
        @if (@Model.item != null)
        {
            string fileExtension = Model.GetFileExtension(Model.item.FileName);
            @if (Model.IsVideoExtension(fileExtension))
            {
                <video controls style="max-width: 100%;">
                    <source src="@Model.item.FullUrl" 
                            type=@($"video/{fileExtension}")>
                    Your browser does not support the video tag.
                </video>
            }
            else
            {
                <img src="@Model.item.FullUrl" 
                    alt="@Model.item.FileName" 
                    style="max-width: 100%;" />
            }

            <!-- Delete button with confirmation popup -->
            <!-- The onsubmit="return confirm('message')" triggers a browser confirmation dialog -->
            <!-- If user clicks OK, confirm() returns true and the form submits -->
            <!-- If user clicks Cancel, confirm() returns false and the form submission is cancelled -->
            <form method="post" asp-page-handler="Delete" 
                onsubmit="return confirm('Are you sure you want to delete this image? This action cannot be undone.');">
                <input type="hidden" name="Id" value="@Model.item.Id" />
                <button type="submit" class="btn btn-danger">Delete Image</button>
            </form>
        }
        else
        {
            <div class="alert alert-warning">
                404 IMAGE NOT FOUND
            </div>
        }
    </div>
</body>
</html>